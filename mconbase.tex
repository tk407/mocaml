\newcommand{\ottdrule}[4][]{{\displaystyle\frac{\begin{array}{l}#2\end{array}}{#3}\quad\ottdrulename{#4}}}
\newcommand{\ottusedrule}[1]{\[#1\]}
\newcommand{\ottpremise}[1]{ #1 \\}
\newenvironment{ottdefnblock}[3][]{ \framebox{\mbox{#2}} \quad #3 \\[0pt]}{}
\newenvironment{ottfundefnblock}[3][]{ \framebox{\mbox{#2}} \quad #3 \\[0pt]\begin{displaymath}\begin{array}{l}}{\end{array}\end{displaymath}}
\newcommand{\ottfunclause}[2]{ #1 \equiv #2 \\}
\newcommand{\ottnt}[1]{\mathit{#1}}
\newcommand{\ottmv}[1]{\mathit{#1}}
\newcommand{\ottkw}[1]{\mathbf{#1}}
\newcommand{\ottsym}[1]{#1}
\newcommand{\ottcom}[1]{\text{#1}}
\newcommand{\ottdrulename}[1]{\textsc{#1}}
\newcommand{\ottcomplu}[5]{\overline{#1}^{\,#2\in #3 #4 #5}}
\newcommand{\ottcompu}[3]{\overline{#1}^{\,#2<#3}}
\newcommand{\ottcomp}[2]{\overline{#1}^{\,#2}}
\newcommand{\ottgrammartabular}[1]{\begin{supertabular}{llcllllll}#1\end{supertabular}}
\newcommand{\ottmetavartabular}[1]{\begin{supertabular}{ll}#1\end{supertabular}}
\newcommand{\ottrulehead}[3]{$#1$ & & $#2$ & & & \multicolumn{2}{l}{#3}}
\newcommand{\ottprodline}[6]{& & $#1$ & $#2$ & $#3 #4$ & $#5$ & $#6$}
\newcommand{\ottfirstprodline}[6]{\ottprodline{#1}{#2}{#3}{#4}{#5}{#6}}
\newcommand{\ottlongprodline}[2]{& & $#1$ & \multicolumn{4}{l}{$#2$}}
\newcommand{\ottfirstlongprodline}[2]{\ottlongprodline{#1}{#2}}
\newcommand{\ottbindspecprodline}[6]{\ottprodline{#1}{#2}{#3}{#4}{#5}{#6}}
\newcommand{\ottprodnewline}{\\}
\newcommand{\ottinterrule}{\\[5.0mm]}
\newcommand{\ottafterlastrule}{\\}
\newcommand{\ottmetavars}{
\ottmetavartabular{
 $ \ottmv{value\_name} ,\, \ottmv{x} $ &  \\
 $ \ottmv{index} ,\, \ottmv{i} ,\, \ottmv{j} ,\, \ottmv{n} ,\, \ottmv{m} $ &  \\
}}

\newcommand{\otttypexpr}{
\ottrulehead{\ottnt{typexpr}  ,\ \ottnt{t}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottkw{tunit}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{typexpr}  \rightarrow  \ottnt{typexpr'}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{typexpr}  *  \ottnt{typexpr'}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\textbf{con} \, \ottnt{typexpr}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{typexpr}  +  \ottnt{typexpr'}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottnt{typexpr}  \ottsym{)}} {\textsf{S}}{}{}{}}

\newcommand{\ottredlabel}{
\ottrulehead{\ottnt{redlabel}  ,\ \ottnt{rl}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\tau}{}{}{}{}\ottprodnewline
\ottprodline{|}{ \ottnt{expr} }{}{}{}{}}

\newcommand{\ottexpr}{
\ottrulehead{\ottnt{expr}  ,\ \ottnt{e}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottmv{value\_name}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{unit}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{expr} \, \ottnt{expr'}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{expr}  \gg=  \ottnt{expr'}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\lambda \, \ottmv{value\_name}  :  \ottnt{t}  .  \ottnt{e}}{}{\textsf{bind}\; \ottmv{value\_name}\; \textsf{in}\; \ottnt{e}}{}{}\ottprodnewline
\ottprodline{|}{\textbf{fix} \, \ottnt{e}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\textbf{comp} \, \ottnt{e}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\textbf{live} \, \ottnt{e}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\{  \ottnt{e}  ,  \ottnt{e'}  \}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\mathrm{ \textbf{proj}_1 }  \ottnt{e}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\mathrm{ \textbf{proj}_2 }  \ottnt{e}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{fork} \, \ottnt{e} \, \ottnt{e'}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{ret} \, \ottnt{e}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottnt{expr}  \ottsym{)}} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{\textbf{left} \, \ottnt{e}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\textbf{right} \, \ottnt{e}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\textbf{case} \, \ottnt{e} \, \textbf{of} \, \textbf{left} \, \ottmv{x_{{\mathrm{1}}}}  \Rightarrow  \ottnt{e_{{\mathrm{1}}}}  \ottsym{\mbox{$\mid$}} \, \textbf{right} \, \ottmv{x_{{\mathrm{2}}}}  \Rightarrow  \ottnt{e_{{\mathrm{2}}}}}{}{\textsf{bind}\; \ottmv{x_{{\mathrm{1}}}}\; \textsf{in}\; \ottnt{e_{{\mathrm{1}}}}}{}{}\ottprodnewline
\ottbindspecprodline{}{}{}{\textsf{bind}\; \ottmv{x_{{\mathrm{2}}}}\; \textsf{in}\; \ottnt{e_{{\mathrm{2}}}}}{}{}\ottprodnewline
\ottprodline{|}{\{  \ottnt{v}  \ottsym{/}  \ottmv{x}  \}  \ottnt{e}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \{  \textbf{fix}  ( \lambda   \ottmv{x}   :   \ottnt{t} .   \ottnt{e} ) /  \ottmv{x'}  \}  \ottnt{e} } {\textsf{M}}{}{}{}}

\newcommand{\ottvalue}{
\ottrulehead{\ottnt{value}  ,\ \ottnt{v}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottkw{unit}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\lambda \, \ottmv{value\_name}  :  \ottnt{typexpr}  .  \ottnt{expr}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\textbf{live} \, \ottnt{e}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\textbf{left} \, \ottnt{v}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\textbf{right} \, \ottnt{v}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\{  \ottnt{v}  ,  \ottnt{v'}  \}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottnt{v}  \ottsym{)}} {\textsf{S}}{}{}{}}

\newcommand{\ottG}{
\ottrulehead{\Gamma}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottkw{empty}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\Gamma  ,  \ottmv{value\_name}  :  \ottnt{typexpr}}{}{}{}{}}

\newcommand{\ottformula}{
\ottrulehead{\ottnt{formula}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottnt{judgement}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{not} \, \ottsym{(}  \ottnt{formula}  \ottsym{)}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{value\_name}  \ottsym{=}  \ottmv{value\_name'}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{is\_value}  \ottnt{e}}{}{}{}{}\ottprodnewline
\ottprodline{|}{ \ottnt{e}  \notin \textit{Values} }{}{}{}{}}

\newcommand{\ottterminals}{
\ottrulehead{\ottnt{terminals}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \rightarrow }{}{}{}{}\ottprodnewline
\ottprodline{|}{ . }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \lambda }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \vdash }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \longrightarrow }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \{ }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ [ }{}{}{}{}\ottprodnewline
\ottprodline{|}{ ] }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \textbf{con} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \textbf{comp} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ exp }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \textbf{live} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \textbf{fix} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathrm{ \textbf{proj}_1 } }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathrm{ \textbf{proj}_2 } }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \tau }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \gg= }{}{}{}{}\ottprodnewline
\ottprodline{|}{ * }{}{}{}{}\ottprodnewline
\ottprodline{|}{ , }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \textbf{left} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \textbf{right} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \textbf{case} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \textbf{of} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \Rightarrow }{}{}{}{}\ottprodnewline
\ottprodline{|}{ + }{}{}{}{}\ottprodnewline
\ottprodline{|}{ : }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \in }{}{}{}{}}

\newcommand{\ottselectopt}{
\ottrulehead{\ottnt{selectopt}  ,\ \ottnt{o}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ 1 }{}{}{}{}\ottprodnewline
\ottprodline{|}{ 2 }{}{}{}{}}

\newcommand{\ottselect}{
\ottrulehead{\ottnt{select}  ,\ \ottnt{s}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottnt{o} \, \ottnt{s}}{}{}{}{}}

\newcommand{\ottJtype}{
\ottrulehead{\ottnt{Jtype}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottmv{value\_name}  :  \ottnt{typexpr} \, \in \, \Gamma}{}{}{}{}\ottprodnewline
\ottprodline{|}{\Gamma  \vdash  \ottnt{e}  :  \ottnt{t}}{}{}{}{}}

\newcommand{\ottJop}{
\ottrulehead{\ottnt{Jop}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \ottnt{e} \, \red{ \ottnt{s} }{ \ottnt{rl} }\,  \ottnt{e'} }{}{}{}{}}

\newcommand{\ottjudgement}{
\ottrulehead{\ottnt{judgement}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottnt{Jtype}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{Jop}}{}{}{}{}}

\newcommand{\ottuserXXsyntax}{
\ottrulehead{\ottnt{user\_syntax}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottmv{value\_name}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{index}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{typexpr}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{redlabel}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{expr}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{value}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\Gamma}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{formula}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{terminals}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{selectopt}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{select}}{}{}{}{}}

\newcommand{\ottgrammar}{\ottgrammartabular{
\otttypexpr\ottinterrule
\ottredlabel\ottinterrule
\ottexpr\ottinterrule
\ottvalue\ottinterrule
\ottG\ottinterrule
\ottformula\ottinterrule
\ottterminals\ottinterrule
\ottselectopt\ottinterrule
\ottselect\ottinterrule
\ottJtype\ottinterrule
\ottJop\ottinterrule
\ottjudgement\ottinterrule
\ottuserXXsyntax\ottafterlastrule
}}

% defnss
% defns Jtype
%% defn VTSin
\newcommand{\ottdruleVTSinXXvnOne}[1]{\ottdrule[#1]{%
}{
\ottmv{value\_name}  :  \ottnt{typexpr} \, \in \, \Gamma  ,  \ottmv{value\_name}  :  \ottnt{typexpr}}{%
{\ottdrulename{VTSin\_vn1}}{}%
}}


\newcommand{\ottdruleVTSinXXvnTwo}[1]{\ottdrule[#1]{%
\ottpremise{\ottmv{value\_name}  :  \ottnt{typexpr} \, \in \, \Gamma}%
\ottpremise{\ottkw{not} \, \ottsym{(}  \ottmv{value\_name}  \ottsym{=}  \ottmv{value\_name'}  \ottsym{)}}%
}{
\ottmv{value\_name}  :  \ottnt{typexpr} \, \in \, \Gamma  ,  \ottmv{value\_name'}  :  \ottnt{typexpr'}}{%
{\ottdrulename{VTSin\_vn2}}{}%
}}

\newcommand{\ottdefnVTSin}[1]{\begin{ottdefnblock}[#1]{$\ottmv{value\_name}  :  \ottnt{typexpr} \, \in \, \Gamma$}{}
\ottusedrule{\ottdruleVTSinXXvnOne{}}
\ottusedrule{\ottdruleVTSinXXvnTwo{}}
\end{ottdefnblock}}

%% defn Get
\newcommand{\ottdruleGetXXret}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{e}  :  \ottnt{t}}%
}{
\Gamma  \vdash  \ottkw{ret} \, \ottnt{e}  :  \textbf{con} \, \ottnt{t}}{%
{\ottdrulename{Get\_ret}}{}%
}}


\newcommand{\ottdruleGetXXfork}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{e}  :  \ottsym{(}  \textbf{con} \, \ottnt{t_{{\mathrm{1}}}}  \ottsym{)}}%
\ottpremise{\Gamma  \vdash  \ottnt{e'}  :  \ottsym{(}  \textbf{con} \, \ottnt{t_{{\mathrm{2}}}}  \ottsym{)}}%
}{
\Gamma  \vdash  \ottkw{fork} \, \ottnt{e} \, \ottnt{e'}  :  \ottsym{(}  \textbf{con} \, \ottsym{(}  \ottsym{(}  \ottnt{t_{{\mathrm{1}}}}  *  \ottsym{(}  \textbf{con} \, \ottnt{t_{{\mathrm{2}}}}  \ottsym{)}  \ottsym{)}  +  \ottsym{(}  \ottsym{(}  \textbf{con} \, \ottnt{t_{{\mathrm{1}}}}  \ottsym{)}  *  \ottnt{t_{{\mathrm{2}}}}  \ottsym{)}  \ottsym{)}  \ottsym{)}}{%
{\ottdrulename{Get\_fork}}{}%
}}


\newcommand{\ottdruleGetXXunit}[1]{\ottdrule[#1]{%
}{
\Gamma  \vdash  \ottkw{unit}  :  \ottkw{tunit}}{%
{\ottdrulename{Get\_unit}}{}%
}}


\newcommand{\ottdruleGetXXprojOne}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{e}  :  \ottsym{(}  \ottnt{t_{{\mathrm{1}}}}  *  \ottnt{t_{{\mathrm{2}}}}  \ottsym{)}}%
}{
\Gamma  \vdash  \mathrm{ \textbf{proj}_1 }  \ottnt{e}  :  \ottsym{(}  \ottnt{t_{{\mathrm{1}}}}  *  \ottnt{t_{{\mathrm{2}}}}  \ottsym{)}  \rightarrow  \ottnt{t_{{\mathrm{1}}}}}{%
{\ottdrulename{Get\_proj1}}{}%
}}


\newcommand{\ottdruleGetXXprojTwo}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{e}  :  \ottsym{(}  \ottnt{t_{{\mathrm{1}}}}  *  \ottnt{t_{{\mathrm{2}}}}  \ottsym{)}}%
}{
\Gamma  \vdash  \mathrm{ \textbf{proj}_2 }  \ottnt{e}  :  \ottsym{(}  \ottnt{t_{{\mathrm{1}}}}  *  \ottnt{t_{{\mathrm{2}}}}  \ottsym{)}  \rightarrow  \ottnt{t_{{\mathrm{2}}}}}{%
{\ottdrulename{Get\_proj2}}{}%
}}


\newcommand{\ottdruleGetXXvalueXXname}[1]{\ottdrule[#1]{%
\ottpremise{\ottmv{x}  :  \ottnt{t} \, \in \, \Gamma}%
}{
\Gamma  \vdash  \ottmv{x}  :  \ottnt{t}}{%
{\ottdrulename{Get\_value\_name}}{}%
}}


\newcommand{\ottdruleGetXXapply}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{e}  :  \ottnt{t_{{\mathrm{1}}}}  \rightarrow  \ottnt{t_{{\mathrm{2}}}}}%
\ottpremise{\Gamma  \vdash  \ottnt{e'}  :  \ottnt{t_{{\mathrm{1}}}}}%
}{
\Gamma  \vdash  \ottnt{e} \, \ottnt{e'}  :  \ottnt{t_{{\mathrm{2}}}}}{%
{\ottdrulename{Get\_apply}}{}%
}}


\newcommand{\ottdruleGetXXlambda}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  ,  \ottmv{x_{{\mathrm{1}}}}  :  \ottnt{t_{{\mathrm{1}}}}  \vdash  \ottnt{e}  :  \ottnt{t}}%
}{
\Gamma  \vdash  \lambda \, \ottmv{x_{{\mathrm{1}}}}  :  \ottnt{t_{{\mathrm{1}}}}  .  \ottnt{e}  :  \ottnt{t_{{\mathrm{1}}}}  \rightarrow  \ottnt{t}}{%
{\ottdrulename{Get\_lambda}}{}%
}}


\newcommand{\ottdruleGetXXliveXXexp}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{e}  :  \ottnt{t}}%
}{
\Gamma  \vdash  \textbf{live} \, \ottnt{e}  :  \textbf{con} \, \ottnt{t}}{%
{\ottdrulename{Get\_live\_exp}}{}%
}}


\newcommand{\ottdruleGetXXcomp}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{e}  :  \ottnt{t}}%
}{
\Gamma  \vdash  \ottsym{(}  \textbf{comp} \, \ottnt{e}  \ottsym{)}  :  \ottnt{t}}{%
{\ottdrulename{Get\_comp}}{}%
}}


\newcommand{\ottdruleGetXXfix}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{e}  :  \ottnt{t}  \rightarrow  \ottnt{t}}%
}{
\Gamma  \vdash  \textbf{fix} \, \ottnt{e}  :  \ottnt{t}}{%
{\ottdrulename{Get\_fix}}{}%
}}


\newcommand{\ottdruleGetXXbind}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{e}  :  \textbf{con} \, \ottnt{t}}%
\ottpremise{\Gamma  \vdash  \ottnt{e'}  :  \ottnt{t}  \rightarrow  \textbf{con} \, \ottnt{t'}}%
}{
\Gamma  \vdash  \ottnt{e}  \gg=  \ottnt{e'}  :  \textbf{con} \, \ottnt{t'}}{%
{\ottdrulename{Get\_bind}}{}%
}}


\newcommand{\ottdruleGetXXpair}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{e}  :  \ottnt{t_{{\mathrm{1}}}}}%
\ottpremise{\Gamma  \vdash  \ottnt{e'}  :  \ottnt{t_{{\mathrm{2}}}}}%
}{
\Gamma  \vdash  \{  \ottnt{e}  ,  \ottnt{e'}  \}  :  \ottsym{(}  \ottnt{t_{{\mathrm{1}}}}  *  \ottnt{t_{{\mathrm{2}}}}  \ottsym{)}}{%
{\ottdrulename{Get\_pair}}{}%
}}


\newcommand{\ottdruleGetXXTInl}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{e}  :  \ottnt{t}}%
}{
\Gamma  \vdash  \textbf{left} \, \ottnt{e}  :  \ottnt{t}  +  \ottnt{t'}}{%
{\ottdrulename{Get\_TInl}}{}%
}}


\newcommand{\ottdruleGetXXTInr}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{e}  :  \ottnt{t}}%
}{
\Gamma  \vdash  \textbf{right} \, \ottnt{e}  :  \ottnt{t'}  +  \ottnt{t}}{%
{\ottdrulename{Get\_TInr}}{}%
}}


\newcommand{\ottdruleGetXXTCase}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{e}  :  \ottnt{t}  +  \ottnt{t'}}%
\ottpremise{\Gamma  ,  \ottmv{x}  :  \ottnt{t}  \vdash  \ottnt{e'}  :  \ottnt{t''}}%
\ottpremise{\Gamma  ,  \ottmv{x'}  :  \ottnt{t'}  \vdash  \ottnt{e''}  :  \ottnt{t''}}%
}{
\Gamma  \vdash  \textbf{case} \, \ottnt{e} \, \textbf{of} \, \textbf{left} \, \ottmv{x}  \Rightarrow  \ottnt{e'}  \ottsym{\mbox{$\mid$}} \, \textbf{right} \, \ottmv{x'}  \Rightarrow  \ottnt{e''}  :  \ottnt{t''}}{%
{\ottdrulename{Get\_TCase}}{}%
}}

\newcommand{\ottdefnGet}[1]{\begin{ottdefnblock}[#1]{$\Gamma  \vdash  \ottnt{e}  :  \ottnt{t}$}{}
\ottusedrule{\ottdruleGetXXret{}}
\ottusedrule{\ottdruleGetXXfork{}}
\ottusedrule{\ottdruleGetXXunit{}}
\ottusedrule{\ottdruleGetXXprojOne{}}
\ottusedrule{\ottdruleGetXXprojTwo{}}
\ottusedrule{\ottdruleGetXXvalueXXname{}}
\ottusedrule{\ottdruleGetXXapply{}}
\ottusedrule{\ottdruleGetXXlambda{}}
\ottusedrule{\ottdruleGetXXliveXXexp{}}
\ottusedrule{\ottdruleGetXXcomp{}}
\ottusedrule{\ottdruleGetXXfix{}}
\ottusedrule{\ottdruleGetXXbind{}}
\ottusedrule{\ottdruleGetXXpair{}}
\ottusedrule{\ottdruleGetXXTInl{}}
\ottusedrule{\ottdruleGetXXTInr{}}
\ottusedrule{\ottdruleGetXXTCase{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJtype}{
\ottdefnVTSin{}\ottdefnGet{}}

% defns Jop
%% defn red
\newcommand{\ottdruleJOXXredXXapp}[1]{\ottdrule[#1]{%
}{
 \ottsym{(}  \lambda \, \ottmv{x}  :  \ottnt{t}  .  \ottnt{e}  \ottsym{)} \, \ottnt{v} \, \red{ \ottnt{s} }{ \tau }\,  \{  \ottnt{v}  \ottsym{/}  \ottmv{x}  \}  \ottnt{e} }{%
{\ottdrulename{JO\_red\_app}}{}%
}}


\newcommand{\ottdruleJOXXredXXdocomp}[1]{\ottdrule[#1]{%
}{
 \textbf{comp} \, \ottnt{e} \, \red{ \ottnt{s} }{  \ottnt{e}  }\,  \ottnt{e} }{%
{\ottdrulename{JO\_red\_docomp}}{}%
}}


\newcommand{\ottdruleJOXXredXXforkevalOne}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{e} \, \red{ \ottnt{s} }{ \ottnt{rl} }\,  \ottnt{e''} }%
}{
 \ottkw{fork} \, \ottnt{e} \, \ottnt{e'} \, \red{ \ottnt{s} }{ \ottnt{rl} }\,  \ottkw{fork} \, \ottnt{e''} \, \ottnt{e'} }{%
{\ottdrulename{JO\_red\_forkeval1}}{}%
}}


\newcommand{\ottdruleJOXXredXXforkevalTwo}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{e'} \, \red{ \ottnt{s} }{ \ottnt{rl} }\,  \ottnt{e''} }%
}{
 \ottkw{fork} \, \ottnt{v} \, \ottnt{e'} \, \red{ \ottnt{s} }{ \ottnt{rl} }\,  \ottkw{fork} \, \ottnt{v} \, \ottnt{e''} }{%
{\ottdrulename{JO\_red\_forkeval2}}{}%
}}


\newcommand{\ottdruleJOXXredXXforkmoveOne}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{e} \, \red{ \ottnt{s} }{ \ottnt{rl} }\,  \ottnt{e''} }%
\ottpremise{ \ottnt{e'}  \notin \textit{Values} }%
}{
 \ottkw{fork} \, \ottsym{(}  \textbf{live} \, \ottnt{e}  \ottsym{)} \, \ottsym{(}  \textbf{live} \, \ottnt{e'}  \ottsym{)} \, \red{  1  \, \ottnt{s} }{ \ottnt{rl} }\,  \ottkw{fork} \, \ottsym{(}  \textbf{live} \, \ottnt{e''}  \ottsym{)} \, \ottsym{(}  \textbf{live} \, \ottnt{e'}  \ottsym{)} }{%
{\ottdrulename{JO\_red\_forkmove1}}{}%
}}


\newcommand{\ottdruleJOXXredXXforkmoveTwo}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{e'} \, \red{ \ottnt{s} }{ \ottnt{rl} }\,  \ottnt{e''} }%
\ottpremise{ \ottnt{e}  \notin \textit{Values} }%
}{
 \ottkw{fork} \, \ottsym{(}  \textbf{live} \, \ottnt{e}  \ottsym{)} \, \ottsym{(}  \textbf{live} \, \ottnt{e'}  \ottsym{)} \, \red{  2  \, \ottnt{s} }{ \ottnt{rl} }\,  \ottkw{fork} \, \ottsym{(}  \textbf{live} \, \ottnt{e}  \ottsym{)} \, \ottsym{(}  \textbf{live} \, \ottnt{e''}  \ottsym{)} }{%
{\ottdrulename{JO\_red\_forkmove2}}{}%
}}


\newcommand{\ottdruleJOXXredXXforkdeathOne}[1]{\ottdrule[#1]{%
}{
 \ottkw{fork} \, \ottsym{(}  \textbf{live} \, \ottnt{v}  \ottsym{)} \, \ottsym{(}  \textbf{live} \, \ottnt{e}  \ottsym{)} \, \red{ \ottnt{s} }{ \tau }\,  \textbf{live} \, \ottsym{(}  \textbf{left} \, \ottsym{(}  \ottsym{(}  \{  \ottnt{v}  ,  \ottsym{(}  \textbf{live} \, \ottnt{e}  \ottsym{)}  \}  \ottsym{)}  \ottsym{)}  \ottsym{)} }{%
{\ottdrulename{JO\_red\_forkdeath1}}{}%
}}


\newcommand{\ottdruleJOXXredXXforkdeathTwo}[1]{\ottdrule[#1]{%
}{
 \ottkw{fork} \, \ottsym{(}  \textbf{live} \, \ottnt{e}  \ottsym{)} \, \ottsym{(}  \textbf{live} \, \ottnt{v'}  \ottsym{)} \, \red{ \ottnt{s} }{ \tau }\,  \textbf{live} \, \ottsym{(}  \textbf{right} \, \ottsym{(}  \{  \ottsym{(}  \textbf{live} \, \ottnt{e}  \ottsym{)}  ,  \ottnt{v'}  \}  \ottsym{)}  \ottsym{)} }{%
{\ottdrulename{JO\_red\_forkdeath2}}{}%
}}


\newcommand{\ottdruleJOXXredXXret}[1]{\ottdrule[#1]{%
}{
 \ottkw{ret} \, \ottnt{v} \, \red{ \ottnt{s} }{ \tau }\,  \ottsym{(}  \textbf{live} \, \ottnt{v}  \ottsym{)} }{%
{\ottdrulename{JO\_red\_ret}}{}%
}}


\newcommand{\ottdruleJOXXredXXevalret}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{e} \, \red{ \ottnt{s} }{ \ottnt{rl} }\,  \ottnt{e'} }%
}{
 \ottkw{ret} \, \ottnt{e} \, \red{ \ottnt{s} }{ \ottnt{rl} }\,  \ottkw{ret} \, \ottnt{e'} }{%
{\ottdrulename{JO\_red\_evalret}}{}%
}}


\newcommand{\ottdruleJOXXredXXevalbind}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{e} \, \red{ \ottnt{s} }{ \ottnt{rl} }\,  \ottnt{e'} }%
}{
 \ottnt{e}  \gg=  \ottnt{e''} \, \red{ \ottnt{s} }{ \ottnt{rl} }\,  \ottnt{e'}  \gg=  \ottnt{e''} }{%
{\ottdrulename{JO\_red\_evalbind}}{}%
}}


\newcommand{\ottdruleJOXXredXXmovebind}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{e} \, \red{ \ottnt{s} }{ \ottnt{rl} }\,  \ottnt{e'} }%
}{
 \ottsym{(}  \textbf{live} \, \ottnt{e}  \ottsym{)}  \gg=  \ottnt{e''} \, \red{ \ottnt{s} }{ \ottnt{rl} }\,  \ottsym{(}  \textbf{live} \, \ottnt{e'}  \ottsym{)}  \gg=  \ottnt{e''} }{%
{\ottdrulename{JO\_red\_movebind}}{}%
}}


\newcommand{\ottdruleJOXXredXXdobind}[1]{\ottdrule[#1]{%
}{
 \ottsym{(}  \textbf{live} \, \ottnt{v}  \ottsym{)}  \gg=  \ottnt{e} \, \red{ \ottnt{s} }{ \tau }\,  \ottnt{e} \, \ottnt{v} }{%
{\ottdrulename{JO\_red\_dobind}}{}%
}}


\newcommand{\ottdruleJOXXredXXcontextXXappTwo}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{e'} \, \red{ \ottnt{s} }{ \ottnt{rl} }\,  \ottnt{e''} }%
}{
 \ottnt{v} \, \ottnt{e'} \, \red{ \ottnt{s} }{ \ottnt{rl} }\,  \ottnt{v} \, \ottnt{e''} }{%
{\ottdrulename{JO\_red\_context\_app2}}{}%
}}


\newcommand{\ottdruleJOXXredXXcontextXXappOne}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{e} \, \red{ \ottnt{s} }{ \ottnt{rl} }\,  \ottnt{e''} }%
}{
 \ottnt{e} \, \ottnt{e'} \, \red{ \ottnt{s} }{ \ottnt{rl} }\,  \ottnt{e''} \, \ottnt{e'} }{%
{\ottdrulename{JO\_red\_context\_app1}}{}%
}}


\newcommand{\ottdruleJOXXredXXfixXXmove}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{e} \, \red{ \ottnt{s} }{ \ottnt{rl} }\,  \ottnt{e'} }%
}{
 \ottsym{(}  \textbf{fix} \, \ottnt{e}  \ottsym{)} \, \red{ \ottnt{s} }{ \ottnt{rl} }\,  \ottsym{(}  \textbf{fix} \, \ottnt{e'}  \ottsym{)} }{%
{\ottdrulename{JO\_red\_fix\_move}}{}%
}}


\newcommand{\ottdruleJOXXredXXfixXXapp}[1]{\ottdrule[#1]{%
}{
 \ottsym{(}  \textbf{fix} \, \ottsym{(}  \lambda \, \ottmv{x}  :  \ottnt{t}  .  \ottnt{e}  \ottsym{)}  \ottsym{)} \, \red{ \ottnt{s} }{ \tau }\,   \{  \textbf{fix}  ( \lambda   \ottmv{x}   :   \ottnt{t} .   \ottnt{e} ) /  \ottmv{x}  \}  \ottnt{e}  }{%
{\ottdrulename{JO\_red\_fix\_app}}{}%
}}


\newcommand{\ottdruleJOXXredXXpairXXOne}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{e} \, \red{ \ottnt{s} }{ \ottnt{rl} }\,  \ottnt{e'} }%
}{
 \{  \ottnt{e}  ,  \ottnt{e''}  \} \, \red{ \ottnt{s} }{ \ottnt{rl} }\,  \{  \ottnt{e'}  ,  \ottnt{e''}  \} }{%
{\ottdrulename{JO\_red\_pair\_1}}{}%
}}


\newcommand{\ottdruleJOXXredXXpairXXTwo}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{e} \, \red{ \ottnt{s} }{ \ottnt{rl} }\,  \ottnt{e'} }%
}{
 \{  \ottnt{v}  ,  \ottnt{e}  \} \, \red{ \ottnt{s} }{ \ottnt{rl} }\,  \{  \ottnt{v}  ,  \ottnt{e'}  \} }{%
{\ottdrulename{JO\_red\_pair\_2}}{}%
}}


\newcommand{\ottdruleJOXXredXXprojOne}[1]{\ottdrule[#1]{%
}{
 \mathrm{ \textbf{proj}_1 }  \{  \ottnt{v}  ,  \ottnt{v'}  \} \, \red{ \ottnt{s} }{ \tau }\,  \ottnt{v} }{%
{\ottdrulename{JO\_red\_proj1}}{}%
}}


\newcommand{\ottdruleJOXXredXXprojTwo}[1]{\ottdrule[#1]{%
}{
 \mathrm{ \textbf{proj}_2 }  \{  \ottnt{v}  ,  \ottnt{v'}  \} \, \red{ \ottnt{s} }{ \tau }\,  \ottnt{v'} }{%
{\ottdrulename{JO\_red\_proj2}}{}%
}}


\newcommand{\ottdruleJOXXredXXprojOneXXeval}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{e} \, \red{ \ottnt{s} }{ \ottnt{rl} }\,  \ottnt{e'} }%
}{
 \mathrm{ \textbf{proj}_1 }  \ottnt{e} \, \red{ \ottnt{s} }{ \ottnt{rl} }\,  \mathrm{ \textbf{proj}_1 }  \ottnt{e'} }{%
{\ottdrulename{JO\_red\_proj1\_eval}}{}%
}}


\newcommand{\ottdruleJOXXredXXprojTwoXXeval}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{e} \, \red{ \ottnt{s} }{ \ottnt{rl} }\,  \ottnt{e'} }%
}{
 \mathrm{ \textbf{proj}_2 }  \ottnt{e} \, \red{ \ottnt{s} }{ \ottnt{rl} }\,  \mathrm{ \textbf{proj}_2 }  \ottnt{e'} }{%
{\ottdrulename{JO\_red\_proj2\_eval}}{}%
}}


\newcommand{\ottdruleJOXXredXXevalinl}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{e} \, \red{ \ottnt{s} }{ \ottnt{rl} }\,  \ottnt{e'} }%
}{
 \textbf{left} \, \ottnt{e} \, \red{ \ottnt{s} }{ \ottnt{rl} }\,  \textbf{left} \, \ottnt{e'} }{%
{\ottdrulename{JO\_red\_evalinl}}{}%
}}


\newcommand{\ottdruleJOXXredXXevalinr}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{e} \, \red{ \ottnt{s} }{ \ottnt{rl} }\,  \ottnt{e'} }%
}{
 \textbf{right} \, \ottnt{e} \, \red{ \ottnt{s} }{ \ottnt{rl} }\,  \textbf{right} \, \ottnt{e'} }{%
{\ottdrulename{JO\_red\_evalinr}}{}%
}}


\newcommand{\ottdruleJOXXredXXevalcaseinl}[1]{\ottdrule[#1]{%
}{
 \textbf{case} \, \ottsym{(}  \textbf{left} \, \ottnt{v}  \ottsym{)} \, \textbf{of} \, \textbf{left} \, \ottmv{x_{{\mathrm{1}}}}  \Rightarrow  \ottnt{e_{{\mathrm{1}}}}  \ottsym{\mbox{$\mid$}} \, \textbf{right} \, \ottmv{x_{{\mathrm{2}}}}  \Rightarrow  \ottnt{e_{{\mathrm{2}}}} \, \red{ \ottnt{s} }{ \tau }\,  \{  \ottnt{v}  \ottsym{/}  \ottmv{x_{{\mathrm{1}}}}  \}  \ottnt{e_{{\mathrm{1}}}} }{%
{\ottdrulename{JO\_red\_evalcaseinl}}{}%
}}


\newcommand{\ottdruleJOXXredXXevalcaseinr}[1]{\ottdrule[#1]{%
}{
 \textbf{case} \, \ottsym{(}  \textbf{right} \, \ottnt{v}  \ottsym{)} \, \textbf{of} \, \textbf{left} \, \ottmv{x_{{\mathrm{1}}}}  \Rightarrow  \ottnt{e}  \ottsym{\mbox{$\mid$}} \, \textbf{right} \, \ottmv{x_{{\mathrm{2}}}}  \Rightarrow  \ottnt{e_{{\mathrm{2}}}} \, \red{ \ottnt{s} }{ \tau }\,  \{  \ottnt{v}  \ottsym{/}  \ottmv{x_{{\mathrm{2}}}}  \}  \ottnt{e_{{\mathrm{2}}}} }{%
{\ottdrulename{JO\_red\_evalcaseinr}}{}%
}}


\newcommand{\ottdruleJOXXredXXevalcase}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{e} \, \red{ \ottnt{s} }{ \ottnt{rl} }\,  \ottnt{e'} }%
}{
 \textbf{case} \, \ottnt{e} \, \textbf{of} \, \textbf{left} \, \ottmv{x_{{\mathrm{1}}}}  \Rightarrow  \ottnt{e_{{\mathrm{1}}}}  \ottsym{\mbox{$\mid$}} \, \textbf{right} \, \ottmv{x_{{\mathrm{2}}}}  \Rightarrow  \ottnt{e_{{\mathrm{2}}}} \, \red{ \ottnt{s} }{ \ottnt{rl} }\,  \textbf{case} \, \ottnt{e'} \, \textbf{of} \, \textbf{left} \, \ottmv{x_{{\mathrm{1}}}}  \Rightarrow  \ottnt{e_{{\mathrm{1}}}}  \ottsym{\mbox{$\mid$}} \, \textbf{right} \, \ottmv{x_{{\mathrm{2}}}}  \Rightarrow  \ottnt{e_{{\mathrm{2}}}} }{%
{\ottdrulename{JO\_red\_evalcase}}{}%
}}

\newcommand{\ottdefnJOXXred}[1]{\begin{ottdefnblock}[#1]{$ \ottnt{e} \, \red{ \ottnt{s} }{ \ottnt{rl} }\,  \ottnt{e'} $}{}
\ottusedrule{\ottdruleJOXXredXXapp{}}
\ottusedrule{\ottdruleJOXXredXXdocomp{}}
\ottusedrule{\ottdruleJOXXredXXforkevalOne{}}
\ottusedrule{\ottdruleJOXXredXXforkevalTwo{}}
\ottusedrule{\ottdruleJOXXredXXforkmoveOne{}}
\ottusedrule{\ottdruleJOXXredXXforkmoveTwo{}}
\ottusedrule{\ottdruleJOXXredXXforkdeathOne{}}
\ottusedrule{\ottdruleJOXXredXXforkdeathTwo{}}
\ottusedrule{\ottdruleJOXXredXXret{}}
\ottusedrule{\ottdruleJOXXredXXevalret{}}
\ottusedrule{\ottdruleJOXXredXXevalbind{}}
\ottusedrule{\ottdruleJOXXredXXmovebind{}}
\ottusedrule{\ottdruleJOXXredXXdobind{}}
\ottusedrule{\ottdruleJOXXredXXcontextXXappTwo{}}
\ottusedrule{\ottdruleJOXXredXXcontextXXappOne{}}
\ottusedrule{\ottdruleJOXXredXXfixXXmove{}}
\ottusedrule{\ottdruleJOXXredXXfixXXapp{}}
\ottusedrule{\ottdruleJOXXredXXpairXXOne{}}
\ottusedrule{\ottdruleJOXXredXXpairXXTwo{}}
\ottusedrule{\ottdruleJOXXredXXprojOne{}}
\ottusedrule{\ottdruleJOXXredXXprojTwo{}}
\ottusedrule{\ottdruleJOXXredXXprojOneXXeval{}}
\ottusedrule{\ottdruleJOXXredXXprojTwoXXeval{}}
\ottusedrule{\ottdruleJOXXredXXevalinl{}}
\ottusedrule{\ottdruleJOXXredXXevalinr{}}
\ottusedrule{\ottdruleJOXXredXXevalcaseinl{}}
\ottusedrule{\ottdruleJOXXredXXevalcaseinr{}}
\ottusedrule{\ottdruleJOXXredXXevalcase{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJop}{
\ottdefnJOXXred{}}

\newcommand{\ottdefnss}{
\ottdefnsJtype
\ottdefnsJop
}

\newcommand{\ottall}{\ottmetavars\\[0pt]
\ottgrammar\\[5.0mm]
\ottdefnss}
